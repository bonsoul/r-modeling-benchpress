---
title: "Perfect Tables"
author: "Bonsoul"
date: "`r Sys.Date()`"
output: html_document
editor_options: 
  chunk_output_type: console
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

```{r}
library(tidyverse)

library(gtsummary)

```

```{r}
d <- trial %>% select(trt, age, grade, response)

```

```{r, summarise the data}
tbl_summary(d, by = trt )
```

```{r}
d %>%
  tbl_strata(
    strata = grade,
    ~.x %>%
      tbl_summary(by = trt)
  )
```

```{r, summarise statistical tests}
d %>%
  tbl_summary(by = trt) %>%
  add_p() %>%
  add_q() %>%
  add_overall() %>%
  add_n() %>%
  add_ci() %>%
  add_stat_label(
    label = all_continuous() ~ "Median (IQR)"
  )

```


```{r}
trial %>%
  tbl_summary(
    by = trt,
    statistic = all_continuous() ~ "{mean} ({sd})"
  ) %>%
  add_p(
    test = list(
      all_continuous() ~ "t.test",
      all_categorical() ~ "fisher.test"
    )
  )

```

```{r}

```

